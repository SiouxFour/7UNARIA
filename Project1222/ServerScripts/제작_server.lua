
local categoryList = 12
local list = {}
for i=1, categoryList do
	list[i] = {dataID = {}, guide = {}, count = {}, chance = {}, gold = {}}
end

list[1].dataID[1] = 401
list[1].guide[1] = {127,129}
list[1].count[1] = {6,50}
list[1].chance[1] = 60
list[1].gold[1] = 5000000

list[1].dataID[2] = 402
list[1].guide[2] = {127,129}
list[1].count[2] = {6,50}
list[1].chance[2] = 60
list[1].gold[2] = 5500000

list[1].dataID[3] = 403
list[1].guide[3] = {127,129}
list[1].count[3] = {6,50}
list[1].chance[3] = 60
list[1].gold[3] = 4200000

list[1].dataID[4] = 404
list[1].guide[4] = {127,129}
list[1].count[4] = {10,30}
list[1].chance[4] = 60
list[1].gold[4] = 9000000

list[1].dataID[5] = 425
list[1].guide[5] = {127,129}
list[1].count[5] = {10,30}
list[1].chance[5] = 60
list[1].gold[5] = 9000000

list[1].dataID[6] = 405
list[1].guide[6] = {127,129}
list[1].count[6] = {6,25}
list[1].chance[6] = 60
list[1].gold[6] = 3500000

list[1].dataID[7] = 406
list[1].guide[7] = {127,129}
list[1].count[7] = {6,25}
list[1].chance[7] = 60
list[1].gold[7] = 3000000

list[1].dataID[8] = 407
list[1].guide[8] = {127,128,129}
list[1].count[8] = {15,2,50}
list[1].chance[8] = 80
list[1].gold[8] = 4000000

list[1].dataID[9] = 408
list[1].guide[9] = {127,128,129}
list[1].count[9] = {20,3,50}
list[1].chance[9] = 80
list[1].gold[9] = 4000000

list[1].dataID[10] = 409
list[1].guide[10] = {127,128,129}
list[1].count[10] = {10,2,30}
list[1].chance[10] = 80
list[1].gold[10] = 4000000

list[1].dataID[11] = 410
list[1].guide[11] = {127,128,129}
list[1].count[11] = {25,7,120}
list[1].chance[11] = 80
list[1].gold[11] = 12000000

list[1].dataID[12] = 426
list[1].guide[12] = {127,128,129}
list[1].count[12] = {25,7,120}
list[1].chance[12] = 80
list[1].gold[12] = 12000000

list[1].dataID[13] = 411
list[1].guide[13] = {127,128,129}
list[1].count[13] = {5,2,80}
list[1].chance[13] = 80
list[1].gold[13] = 4000000

list[1].dataID[14] = 412
list[1].guide[14] = {127,128,129}
list[1].count[14] = {5,2,90}
list[1].chance[14] = 80
list[1].gold[14] = 4000000

list[1].dataID[15] = 413
list[1].guide[15] = {127,128,129}
list[1].count[15] = {4,2,150}
list[1].chance[15] = 80
list[1].gold[15] = 4000000

list[1].dataID[16] = 414
list[1].guide[16] = {127,128,129}
list[1].count[16] = {10,2,100}
list[1].chance[16] = 80
list[1].gold[16] = 7000000

list[1].dataID[17] = 415
list[1].guide[17] = {127,128,129}
list[1].count[17] = {5,5,200}
list[1].chance[17] = 80
list[1].gold[17] = 7700000

list[1].dataID[18] = 416
list[1].guide[18] = {127,128,129}
list[1].count[18] = {15,2,50}
list[1].chance[18] = 35
list[1].gold[18] = 4000000

list[1].dataID[19] = 417
list[1].guide[19] = {127,128,129}
list[1].count[19] = {20,3,50}
list[1].chance[19] = 35
list[1].gold[19] = 4000000

list[1].dataID[20] = 418
list[1].guide[20] = {127,128,129}
list[1].count[20] = {10,2,30}
list[1].chance[20] = 35
list[1].gold[20] = 4000000

list[1].dataID[21] = 419
list[1].guide[21] = {127,128,129}
list[1].count[21] = {25,7,120}
list[1].chance[21] = 35
list[1].gold[21] = 12000000

list[1].dataID[22] = 427
list[1].guide[22] = {127,128,129}
list[1].count[22] = {25,7,120}
list[1].chance[22] = 35
list[1].gold[22] = 12000000

list[1].dataID[23] = 420
list[1].guide[23] = {127,128,129}
list[1].count[23] = {5,2,80}
list[1].chance[23] = 35
list[1].gold[23] = 4000000

list[1].dataID[24] = 421
list[1].guide[24] = {127,128,129}
list[1].count[24] = {5,2,90}
list[1].chance[24] = 35
list[1].gold[24] = 4000000

list[1].dataID[25] = 422
list[1].guide[25] = {127,128,129}
list[1].count[25] = {4,2,150}
list[1].chance[25] = 35
list[1].gold[25] = 4000000

list[1].dataID[26] = 423
list[1].guide[26] = {127,128,129}
list[1].count[26] = {10,2,100}
list[1].chance[26] = 35
list[1].gold[26] = 7000000

list[1].dataID[27] = 424
list[1].guide[27] = {127,128,129}
list[1].count[27] = {5,5,200}
list[1].chance[27] = 35
list[1].gold[27] = 7700000

list[2].dataID[1] = 501
list[2].guide[1] = {235,243}
list[2].count[1] = {200,175}
list[2].chance[1] = 75
list[2].gold[1] = 15000000

list[2].dataID[2] = 502
list[2].guide[2] = {235,243}
list[2].count[2] = {230,170}
list[2].chance[2] = 75
list[2].gold[2] = 15000000

list[2].dataID[3] = 503
list[2].guide[3] = {235,243}
list[2].count[3] = {250,200}
list[2].chance[3] = 75
list[2].gold[3] = 18000000

list[2].dataID[4] = 504
list[2].guide[4] = {235,243}
list[2].count[4] = {300,180}
list[2].chance[4] = 75
list[2].gold[4] = 18000000

list[2].dataID[5] = 505
list[2].guide[5] = {235,243}
list[2].count[5] = {220,180}
list[2].chance[5] = 75
list[2].gold[5] = 20000000

list[2].dataID[6] = 506
list[2].guide[6] = {235,243}
list[2].count[6] = {220,180}
list[2].chance[6] = 75
list[2].gold[6] = 20000000

list[2].dataID[7] = 509
list[2].guide[7] = {235,243}
list[2].count[7] = {200,200}
list[2].chance[7] = 75
list[2].gold[7] = 12000000

list[2].dataID[8] = 510
list[2].guide[8] = {235,243}
list[2].count[8] = {250,150}
list[2].chance[8] = 75
list[2].gold[8] = 30000000

list[2].dataID[9] = 507
list[2].guide[9] = {235,243}
list[2].count[9] = {250,150}
list[2].chance[9] = 75
list[2].gold[9] = 30000000

list[8].dataID[1] = 170
list[8].guide[1] = {395,396,397,398}
list[8].count[1] = {1,1,2,2}
list[8].chance[1] = 50
list[8].gold[1] = 200000

list[8].dataID[2] = 169
list[8].guide[2] = {395,396,397,398}
list[8].count[2] = {1,1,4,1}
list[8].chance[2] = 50
list[8].gold[2] = 400000

list[8].dataID[3] = 171
list[8].guide[3] = {395,396,397,398,399}
list[8].count[3] = {1,1,2,2,2}
list[8].chance[3] = 50
list[8].gold[3] = 600000

list[9].dataID[1] = 84
list[9].guide[1] = {610}
list[9].count[1] = {1}
list[9].chance[1] = 100
list[9].gold[1] = 0

list[10].dataID[1] = 140
list[10].guide[1] = {604}
list[10].count[1] = {1}
list[10].chance[1] = 100
list[10].gold[1] = 5000000

list[10].dataID[2] = 609
list[10].guide[2] = {604}
list[10].count[2] = {2}
list[10].chance[2] = 100
list[10].gold[2] = 12500000

list[10].dataID[3] = 613
list[10].guide[3] = {604}
list[10].count[3] = {4}
list[10].chance[3] = 100
list[10].gold[3] = 25000000

list[10].dataID[4] = 612
list[10].guide[4] = {604}
list[10].count[4] = {8}
list[10].chance[4] = 100
list[10].gold[4] = 50000000

list[10].dataID[5] = 604
list[10].guide[5] = {126}
list[10].count[5] = {1}
list[10].chance[5] = 100
list[10].gold[5] = 3500000

list[10].dataID[6] = 604
list[10].guide[6] = {137}
list[10].count[6] = {1}
list[10].chance[6] = 100
list[10].gold[6] = 3500000

list[10].dataID[7] = 604
list[10].guide[7] = {138}
list[10].count[7] = {1}
list[10].chance[7] = 100
list[10].gold[7] = 3500000

list[10].dataID[8] = 604
list[10].guide[8] = {139}
list[10].count[8] = {1}
list[10].chance[8] = 100
list[10].gold[8] = 3500000

list[10].dataID[9] = 626
list[10].guide[9] = {605}
list[10].count[9] = {1}
list[10].chance[9] = 100
list[10].gold[9] = 3500000

list[10].dataID[10] = 626
list[10].guide[10] = {606}
list[10].count[10] = {1}
list[10].chance[10] = 100
list[10].gold[10] = 3500000

list[10].dataID[11] = 626
list[10].guide[11] = {607}
list[10].count[11] = {1}
list[10].chance[11] = 100
list[10].gold[11] = 3500000

list[10].dataID[12] = 626
list[10].guide[12] = {608}
list[10].count[12] = {1}
list[10].chance[12] = 100
list[10].gold[12] = 3500000

list[10].dataID[13] = 627
list[10].guide[13] = {614}
list[10].count[13] = {1}
list[10].chance[13] = 100
list[10].gold[13] = 3500000

list[10].dataID[14] = 627
list[10].guide[14] = {615}
list[10].count[14] = {1}
list[10].chance[14] = 100
list[10].gold[14] = 3500000

list[10].dataID[15] = 627
list[10].guide[15] = {616}
list[10].count[15] = {1}
list[10].chance[15] = 100
list[10].gold[15] = 3500000

list[10].dataID[16] = 627
list[10].guide[16] = {617}
list[10].count[16] = {1}
list[10].chance[16] = 100
list[10].gold[16] = 3500000

list[10].dataID[17] = 628
list[10].guide[17] = {618}
list[10].count[17] = {1}
list[10].chance[17] = 100
list[10].gold[17] = 3500000

list[10].dataID[18] = 628
list[10].guide[18] = {619}
list[10].count[18] = {1}
list[10].chance[18] = 100
list[10].gold[18] = 3500000

list[10].dataID[19] = 628
list[10].guide[19] = {620}
list[10].count[19] = {1}
list[10].chance[19] = 100
list[10].gold[19] = 3500000

list[10].dataID[20] = 628
list[10].guide[20] = {621}
list[10].count[20] = {1}
list[10].chance[20] = 100
list[10].gold[20] = 3500000

list[11].dataID[1] = 94
list[11].guide[1] = {223}
list[11].count[1] = {100}
list[11].chance[1] = 100
list[11].gold[1] = 1000000

list[11].dataID[2] = 94
list[11].guide[2] = {127}
list[11].count[2] = {15}
list[11].chance[2] = 100
list[11].gold[2] = 500000

list[11].dataID[3] = 121
list[11].guide[3] = {118}
list[11].count[3] = {1500}
list[11].chance[3] = 100
list[11].gold[3] = 3000000

list[11].dataID[4] = 121
list[11].guide[4] = {128}
list[11].count[4] = {15}
list[11].chance[4] = 100
list[11].gold[4] = 1500000

list[12].dataID[1] = 147
list[12].guide[1] = {602}
list[12].count[1] = {10}
list[12].chance[1] = 100
list[12].gold[1] = 0

list[12].dataID[2] = 152
list[12].guide[2] = {602}
list[12].count[2] = {10}
list[12].chance[2] = 100
list[12].gold[2] = 0

list[12].dataID[3] = 611
list[12].guide[3] = {602}
list[12].count[3] = {20}
list[12].chance[3] = 100
list[12].gold[3] = 0

list[12].dataID[4] = 122
list[12].guide[4] = {602}
list[12].count[4] = {5}
list[12].chance[4] = 100
list[12].gold[4] = 0

list[12].dataID[5] = 631
list[12].guide[5] = {602}
list[12].count[5] = {15}
list[12].chance[5] = 100
list[12].gold[5] = 0

list[12].dataID[6] = 633
list[12].guide[6] = {602}
list[12].count[6] = {30}
list[12].chance[6] = 100
list[12].gold[6] = 0

list[12].dataID[7] = 603
list[12].guide[7] = {602}
list[12].count[7] = {10}
list[12].chance[7] = 100
list[12].gold[7] = 0

list[12].dataID[8] = 178
list[12].guide[8] = {602}
list[12].count[8] = {3}
list[12].chance[8] = 100
list[12].gold[8] = 0

local labelList = {}
labelList[4] = true
labelList[5] = true

Server.GetTopic("create_postSel").Add(function(text)
	text = Utility.JSONParse(text)
	if list[text.category].dataID[text.sel] ~= nil then
		local bool = false
		for i=1, #list[text.category].guide[text.sel] do
			if unit.CountItem(list[text.category].guide[text.sel][i]) < list[text.category].count[text.sel][i] then
				bool = true
			end
		end
		if bool == false then
			if list[text.category].gold[text.sel] <= unit.gameMoney then
				local random = function(min, max)
					return rand(min, max+1)
				end
				for i=1, #list[text.category].guide[text.sel] do
					unit.RemoveItem(list[text.category].guide[text.sel][i], list[text.category].count[text.sel][i], false)
				end
				unit.UseGameMoney(list[text.category].gold[text.sel])
				if random(1, 10000) <= list[text.category].chance[text.sel]*100 then
					unit.AddItem(list[text.category].dataID[text.sel], 1)
					if labelList[list[text.category].dataID[text.sel]] == true then
						Server.SendCenterLabel(unit.player.name.." 님께서 "..Server.GetItem(list[text.category].dataID[text.sel]).name.." 제작에 성공하였습니다.")
					end
				else
					unit.SendCenterLabel("제작에 실패하였습니다.")
				end
			else
				unit.SendCenterLabel("소지금이 부족합니다.")
			end
		else
			unit.SendCenterLabel("재료 아이템이 부족합니다.")
		end
	else
		unit.SendCenterLabel("error")
	end
end)
